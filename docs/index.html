<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/x-icon" href="./favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CurseForge Mods Manager</title>
  <script type="module" crossorigin>const g={VITE_CURSEFORGE_API_KEY:"$2a$10$luW8WuhloEV39vXf1VsDluOUVbH2.TtvsFv71LKQI5xGmuzWCZ5tu"},{VITE_CURSEFORGE_API_KEY:A}=g;async function _(e){const o=`https://api.curseforge.com/v1/mods/${e}`;return await(await fetch(o,{headers:{Accept:"application/json","x-api-key":A}})).json()}const N={VITE_CURSEFORGE_API_KEY:"$2a$10$luW8WuhloEV39vXf1VsDluOUVbH2.TtvsFv71LKQI5xGmuzWCZ5tu"},{VITE_CURSEFORGE_API_KEY:k}=N;async function S(e,o,r,s){const c=R(r),a=`https://api.curseforge.com/v1/mods/${e}/files?gameVersion=${o}&modLoaderType=${c}`,l=await fetch(a,{headers:{Accept:"application/json","x-api-key":k}}),{data:n}=await l.json();return n.filter(t=>t.releaseType<=s)}function R(e){switch(e){case"cauldron":return 2;case"forge":return 1;case"fabric":return 4;case"quilt":return 5;case"neoforge":return 6;case"liteloader":return 3;default:throw new Error(e)}}var v=(e=>(e.BUKKIT="bukkit",e.BUNGEECORD="bungeecord",e.CAULDRON="cauldron",e.DATAPACK="datapack",e.FABRIC="fabric",e.FOLIA="folia",e.FORGE="forge",e.LITELOADER="liteloader",e.MODLOADER="modloader",e.NEOFORGE="neoforge",e.PAPER="paper",e.PURPUR="purpur",e.QUILT="quilt",e.RIFT="rift",e.SPIGOT="spigot",e.SPONGE="sponge",e.VELOCITY="velocity",e.WATERFALL="waterfall",e))(v||{}),w=(e=>(e[e.RELEASE=1]="RELEASE",e[e.BETA=2]="BETA",e[e.ALPHA=3]="ALPHA",e))(w||{});function f(e){let o=e;const r=new Set;function s(c){return r.add(c),c(o),()=>r.delete(c)}return{subscribe:s,set value(c){o=c;for(const a of r)a(o)},get value(){return o}}}const E=f(0),h=f(v.FABRIC),C=f("1.20.1"),d=f(new Set);async function U(e){var r;const o=await S(e,C.value,h.value,w.RELEASE);if(o.length>0&&((r=o[0])!=null&&r.downloadUrl))return o[0].downloadUrl}async function b(e){return d.value=new Set,new Promise((o,r)=>{if(e.length===0){alert("No mods to download"),o();return}Promise.all(e.map(async s=>{try{const c=await U(s);if(!c){console.warn(`No compatible files found for mod ${s}`);const a=d.value;a.add(s),d.value=a}return c}catch(c){console.error(`Failed to get download URL for mod ${s}:`,c);const a=d.value;a.add(s),d.value=a;return}})).then(s=>{const c=s.filter(a=>typeof a=="string"&&a.length>0);if(c.length===0){alert("No valid download URLs found"),o();return}for(const a of c){if(a.includes("null")){console.warn("Skipping invalid URL:",a);continue}window.open(a,"_blank")}o()}).catch(s=>{console.error("Failed to download mods:",s),alert("Failed to download mods. Check console for details."),r(s)})})}function F({details:{data:e}}){const o=()=>{const n=document.createElement("a"),t=document.createElement("img");return n.href=e.links.websiteUrl,n.target="_blank",n.className="mod-logo-link",t.src=e.logo.thumbnailUrl,t.className="mod-logo",n.appendChild(t),n},r=()=>{const n=document.createElement("a");return n.href=e.links.websiteUrl,n.textContent=e.name,n.target="_blank",n.className="mod-name",n},s=()=>{const n=document.createElement("div"),t=e.latestFiles.find(u=>u.gameVersions.includes("1.20.1")&&u.gameVersions.includes("Fabric"));return n.textContent=`Latest Version: ${(t==null?void 0:t.fileName)||"N/A"}`,n.className="mod-version",n},c=()=>{const n=document.createElement("div"),t=new Date(e.dateModified).toLocaleDateString();return n.textContent=`Last Updated: ${t}`,n.className="mod-update",n},a=()=>{const n=document.createElement("button");return n.className="mod-download",n.innerHTML=`
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 3V16M12 16L7 11M12 16L17 11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M3 20H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
        `,n.onclick=async()=>{try{await b([e.id])}catch(t){console.error("Failed to download mod:",t)}},n},l=document.createElement("div");return l.className="mod-container",d.subscribe(n=>l.classList.toggle("failed",n.has(e.id))),l.append(o(),r(),s(),c(),a()),l}function D({onSubmit:e}){const o=()=>{const t=document.createElement("div");return t.className="search-container",t},r=()=>{const t=document.createElement("input");return t.type="number",t.placeholder="Enter mod ID",t.className="mod-input",t},s=()=>{const t=document.createElement("button");return t.textContent="Add Mod",t.className="add-button",t},c=r(),a=s(),l=o(),n=()=>{const t=Number.parseInt(c.value);t&&(e(t),c.value="")};return c.addEventListener("keypress",t=>{t.key==="Enter"&&n()}),a.onclick=n,l.appendChild(c),l.appendChild(a),l}function I({children:e}){const o=document.createElement("div");return o.className="header-container",o.append(...e),o}function L({count:e}){const o=document.createElement("div");return o.className="mods-count",e.subscribe(r=>{o.textContent=`Mods: ${r}`}),o}function y({onDownloadAll:e,onClearAll:o}){const r=()=>{const t=document.createElement("button");return t.textContent="Download All",t.className="action-button download",t.onclick=async()=>{await e(m=>{t.disabled=m,t.textContent=m?"Downloading...":"Download All"})},t},s=()=>{const t=document.createElement("button");return t.textContent="Clear All",t.className="action-button clear",t.onclick=o,t},c=(t,u)=>{E.subscribe(m=>{t.disabled=m===0,u.disabled=m===0})},a=document.createElement("div");a.className="action-buttons";const l=r(),n=s();return c(l,n),a.append(l,n),a}function M({loader:e,version:o}){const r=()=>{const a=document.createElement("select");a.className="loader-select";for(const l of Object.values(v)){const n=document.createElement("option");n.value=l,n.textContent=l.charAt(0).toUpperCase()+l.slice(1).toLowerCase(),n.selected=l===e.value,a.appendChild(n)}return a.addEventListener("change",l=>{const n=l.target;e.value=n.value}),a},s=()=>{const a=document.createElement("input");return a.type="text",a.className="version-input",a.value=o.value,a.placeholder="Game Version",a.addEventListener("change",l=>{const n=l.target;o.value=n.value}),a},c=document.createElement("div");return c.className="loader-select-container",c.append(r(),s()),c}const i={renderedMods:new Set,container:document.querySelector("#app")};async function p(e){var s;if(i.renderedMods.has(e))return;i.renderedMods.add(e);const o=await _(e);i.container.appendChild(F({details:o}));const r=((s=o.data.latestFiles[0])==null?void 0:s.dependencies)||[];E.value++,await O(r)}async function O(e){const o=e.map(({modId:r})=>p(r));await Promise.all(o)}async function V(e){e(!0),b(Array.from(i.renderedMods)).then(()=>e(!1))}function B(){i.container.innerHTML="",i.renderedMods.clear(),E.value=0}async function P(){const e=L({count:E}),o=D({onSubmit:p}),r=M({loader:h,version:C}),s=y({onDownloadAll:V,onClearAll:B}),c=I({children:[e,o,r,s]});document.body.insertBefore(c,i.container),p(983756),p(890301)}P();</script>
  <style rel="stylesheet" crossorigin>.mod-container{background:#1e2127;border-radius:12px;box-shadow:0 4px 6px #0000004d;transition:transform .2s,box-shadow .2s;overflow:hidden}.mod-container:hover{transform:translateY(-5px);box-shadow:0 8px 12px #0006}.mod-container.failed{background-color:#ff38381a;border-color:#ff3838}.mod-container .mod-logo{width:100%;height:200px;object-fit:cover;border-bottom:1px solid #2c313a}.mod-container .mod-name{display:block;padding:.5rem;font-size:1rem;color:#e2e8f0;text-decoration:none;font-weight:600;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mod-container .mod-version,.mod-container .mod-update{padding:.25rem .5rem;color:#a0aec0;font-size:.8rem;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mod-container .mod-logo-link{display:block;cursor:pointer}.mod-container .mod-download{position:absolute;top:1rem;right:1rem;width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center;border:1px solid rgba(44,49,58,.8);background:#282c34cc;color:#e2e8f0;cursor:pointer;transition:color .2s}.mod-container .mod-download:hover{border-color:#60a5facc;background:#282c34cc}.search-container{display:flex;gap:1rem}.search-container .mod-input{padding:.5rem .75rem;border:1px solid rgba(44,49,58,.5);border-radius:6px;background:#282c3480;color:#e2e8f0;font-size:.9rem;width:200px;-webkit-appearance:textfield;appearance:textfield;-moz-appearance:textfield;transition:border-color .2s,box-shadow .2s}.search-container .mod-input:focus{outline:none;border-color:#60a5fa;box-shadow:0 0 0 2px #60a5fa33}.search-container .mod-input::-webkit-outer-spin-button,.search-container .mod-input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.search-container .add-button{padding:.5rem .75rem;background:#1e2127;border:1px solid rgba(44,49,58,.5);border-radius:6px;color:#e2e8f0;font-weight:500;cursor:pointer;transition:all .2s}.search-container .add-button:hover{background:#282c34;border-color:#60a5fa80}.search-container .add-button:active{background:#1a1d23}.header-container{display:flex;gap:1rem;justify-content:space-between;padding:1rem;background:#1e2127cc;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);position:sticky;top:0;z-index:100;border-bottom:1px solid rgba(44,49,58,.5)}.mods-count{padding:.35rem .75rem;background:#282c3480;border:1px solid rgba(44,49,58,.5);border-radius:6px;color:#e2e8f0;font-size:.9rem;display:flex;align-items:center}.action-buttons{display:flex;gap:.5rem}.action-button{padding:.35rem .75rem;border-radius:6px;font-weight:500;cursor:pointer;transition:all .2s;border:1px solid rgba(44,49,58,.5);background:#282c3480;color:#e2e8f0}.action-button:hover{border-color:#60a5fa80;background:#282c34cc}.action-button.download:hover{color:#4ade80}.action-button.clear:hover{color:#f87171}.action-button:disabled{opacity:.7;cursor:not-allowed}.loader-select-container{display:flex;gap:8px;align-items:center}.loader-select,.version-input{padding:8px;border-radius:4px;border:1px solid #2c313a;background:#1e2127;color:#e2e8f0;font-size:14px}.version-input{width:100px}.loader-select:focus,.version-input:focus{outline:none;border-color:#60a5fa}body{background:#121417;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;color:#e2e8f0}#app{display:grid;grid-template-columns:repeat(6,1fr);gap:2rem;padding:2rem;max-width:1400px;margin:0 auto}</style>
<link rel="manifest" href="./manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="./registerSW.js"></script></head>

<body>
  <div id="app"></div>
</body>

</html>